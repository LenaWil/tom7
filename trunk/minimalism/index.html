<!doctype html>
<script type="text/javascript" src="jsutil.js"></script>
<script type="text/javascript" src="constants.js"></script>
<script type="text/javascript" src="mindows.js"></script>

<style>
body {
  background: #300;
}

div.border {
  position: absolute;
}

div#oscont {
  width: 640px;
  height: 480px;
  background: #003;
  cursor: none;
  position: relative;
  margin-left: auto;
  margin-right: auto;
  margin-top: 6em;

  -webkit-font-smoothing: none;

  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

img#spaceball {
  position: absolute;
  width: 640px;
  height: 480px;
  z-index: 99999;
}

div#os {
  width: 640px;
  height: 480px;
  background: #003;
  overflow: hidden;
  cursor: none;
  position: relative;
}

div.win {
  background: #fff;
  overflow: hidden;
  position: absolute;
}

img.abs {
  position: absolute;
}

div.title {
  position: absolute;
  text-align: center;
  overflow: hidden;
  font: bold 13px sans-serif;
  color: #fff;
}

div.titletext {
  margin-top: 1px;
  margin-left: 32px;
}

img.mouse {
  z-index: 9999;
  position: absolute;
}

div#deb {
  zzdisplay: none;
  font-family: monospace;
  font-size: 24px;
  color: #CFF;
}

div.menu {
  background: #fff;
  border-bottom: 1px solid black;
  position: absolute;
  overflow: hidden;
  padding-left: 6px;
}

div.menuitem {
  padding: 2px 6px;
  margin-left: 4px;
  margin-right: 4px;
  float: left;
}

div.childmenu {
  padding: 2px 0;
  position: absolute;
  zzwidth: 100px;
  border: 1px solid #000;
  zzbackground: #225;
  /* XXX */
  z-index: 9998;
}

div.childoption {
  zzbackground: #F00
  float: left;
  padding: 2px 6px;
  zzpadding-left: 6px;
  zzpadding-right: 6px;
}

div.iconcaption {
  padding: 2px 6px;
  width: 80px;
  height: 60px;
  overflow: hidden;
}

img.icon {
  margin-right: auto;
  margin-left: auto;
}

div.iconholder {
  zzposition: relative;
  zzborder: 1px solid red;
}

div.icon {
  position: absolute;
}

</style>

<script>
function init() {
 // Don't allow dragging anything at the browser level.
 window.ondragstart = function() { return false; };
 deb = document.getElementById('deb');
 if (!deb) throw 'huh';
 if (('' + window.location).indexOf('spacebar.org') != -1) {
   deb.style.display = 'none';
 }

 initos(document.getElementById('os'));

 setupgame();

 // XXX  do stuff...

 osredraw();
}
</script>

<body onload="init()">
  <div id="oscont">
    <!-- catches mouse events to make sure we don't get
         cursor funkyness from adding and deleting dom
         elements while e.g. dragging -->
    <img id="spaceball" draggable="false" src="spaceball.gif"></img>
    <!-- Everything happens in here. -->
    <div id="os"></div>
  </div>
  <div id="deb">This is the development copy!</div>
</body>
