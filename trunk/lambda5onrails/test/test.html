<html>
<head>
<title>Test XMLHTTPrequest</title>
<link rel="stylesheet" type="text/css" href="tom7.css" title="tom7" />
</head>
<body>
<p>Welcome to my cool page!</p>

<p><div id="response">
(NOT CONNECTED)
</div></p>

<script language="JavaScript">
function connect(url) {
    var req;

    if (window.XMLHttpRequest) {

        try {
         netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
        } catch (e) {
         alert("Permission UniversalBrowserRead denied.");
        }

        req = new XMLHttpRequest();
        req.onreadystatechange = think;
        req.open("GET", url, true);
        req.send(null);

    } else if (window.ActiveXObject) {

        req = new ActiveXObject("Microsoft.XMLHTTP");
        if (req) {
            req.onreadystatechange = think;
            req.open("GET", url, true);
            req.send();
        }

    }
    return req;
}

req = connect("http://localhost:9999/hello");
function think() {
    // alert(req.readyState + ": " + req.responseText);
    document.getElementById('response').innerHTML = req.responseText;
}

</script>

</p>

</body>
</html>